<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Oracle Sia : Tirage à 7 cartes – Introspection émotionnelle et mémoire intérieure</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Tirage gratuit à 7 cartes avec l’Oracle Sia. Une lecture symbolique pour explorer les émotions profondes, l’intuition et la mémoire intérieure de l’âme.">
  <meta name="keywords" content="tirage 7 cartes, oracle Sia, introspection émotionnelle, intuition, mémoire intérieure, oracle de l’âme, ressentis, tirage gratuit">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Oracle Sia : Tirage à 7 cartes",
    "url": "https://oracleheka.github.io/oracle_trium/sia_7cartes.html",
    "description": "Tirage gratuit à 7 cartes avec l’Oracle Sia. Une lecture symbolique pour explorer les émotions profondes, l’intuition et la mémoire intérieure de l’âme.",
    "inLanguage": "fr",
    "author": {
      "@type": "Person",
      "name": "Roland Alberolla"
    },
    "keywords": [
      "tirage 7 cartes",
      "oracle Sia",
      "introspection émotionnelle",
      "intuition",
      "mémoire intérieure",
      "oracle de l’âme",
      "ressentis",
      "tirage gratuit"
    ]
  }
  </script>
  
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f8f5f2;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    button {
  padding: 0.7rem 1.5rem;
  background-color: #4a90e2;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
}
button:hover {
  background-color: #357abd;
}
    header {
      background-color: #f5efe6;
      padding: 1rem 2rem;
      display: flex;
      justify-content: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header nav a {
      display: inline-block;
  padding: 0.75rem 1rem; /* agrandit la zone cliquable */
  margin: 0.25rem 0.5rem; /* espace entre les liens */
  text-decoration: none;
  color: #444;
  font-weight: bold;
  font-size: 1rem; /* assure lisibilité */
    }
    header nav a:hover {
      text-decoration: underline;
    }
    main {
      flex: 1;
      padding: 3rem 2rem;
      max-width: 900px;
      margin: 0 auto;
    }
    footer {
      background-color: #f0e9e0;
      padding: 1rem;
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      border-top: 1px solid #ccc;
    }
  </style>
</head>
<body>

<header>
  <nav>
    <a href="index.html">Accueil</a>
    <a href="apropos.html">À propos</a>
    <a href="methodes.html">Méthodes de Tirages</a>
    <a href="heka.html">Oracle Heka</a>
    <a href="sia.html">Oracle Sia</a>
    <a href="seshat.html">Oracle Seshat</a>
    <a href="decouverte.html">Découverte</a>
  </nav>
</header>

<main>
  <h1>Tirage à 7 cartes avec l'Oracle Sia</h1>
  <div style="display: flex; align-items: center; gap: 2rem; margin: 1.5rem 0;">
  <fieldset style="border: none; margin: 0;">
  <legend><strong>Choisir l’aspect :</strong></legend>
  <label><input type="radio" name="aspect" value="personnalité" checked> Personnalité</label><br>
  <label><input type="radio" name="aspect" value="affectif"> Affectif</label><br>
  <label><input type="radio" name="aspect" value="spirituel"> Spirituel</label>
</fieldset>

  <button id="melangerBtn" onclick="melangerEtCouper()">Mélanger et couper le jeu</button>
  <button id="tirerBtn" onclick="tirerLesCartes()">Tirer les cartes</button>
  <button id="ajouterBtn" onclick="ajouterUneCarte()">Ajouter une carte</button>
  <button id="réinitialiserBtn" onclick="réinitialiser()">Réinitialiser</button>
</div>
  <div style="margin-top: 2rem;">
  <label for="question"><strong>Posez votre question (facultatif) :</strong></label><br>
  <input type="text" id="question" name="question" placeholder="Écrivez votre question ici..." style="width: 100%; max-width: 600px; padding: 0.6rem; margin-top: 0.5rem; border: 1px solid #ccc; border-radius: 6px;">
</div>
  <div id="resultats" style="margin-top: 2rem; display: flex; gap: 1rem; flex-wrap: wrap;"></div>
   <!-- Bouton pour afficher la synthèse -->
<button id="btnSynthese" style="display:none; margin-top: 1rem;">Voir la synthèse guidante</button>
  
  <p>Tirage plus détaillé, idéal pour explorer une dynamique complexe. Peut servir à analyser une évolution, une relation ou une trajectoire personnelle.</p>
  <ul>
    <li>influence de départ</li>
    <li>la dynamique actuelle</li>
    <li>L'évolution possible</li>
  </ul>
  <p>Sia est l’oracle du dedans. Il n’éclaire pas ce qui se voit, mais ce qui murmure en profondeur.
     Il révèle les perceptions subtiles, les mouvements internes, les ressentis que l’on ne sait pas toujours nommer mais que l’on porte en silence.</p>

</main>
<footer style="text-align:center; margin-top: 2rem; padding: 1rem; font-size: 0.9rem;">
  Produit par <strong>OracleHeka</strong> —
  <a href="mentions-legales.html">Mentions légales</a> —
  <a href="mailto:heka.sia.seshat@gmail.com">Contact</a>
</footer>
 <script>
  let toutesLesCartes = [];
  let cartesDisponibles = [];
  let cartesTirees = [];
  let jeuPrepare = false;

  async function chargerCartes() {
    const reponse = await fetch("https://oracleheka.github.io/oracle_trium/data/sia.json");
    toutesLesCartes = await reponse.json();
    cartesDisponibles = [...toutesLesCartes];
  }

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  async function melangerEtCouper() {
    if (toutesLesCartes.length === 0) {
      await chargerCartes();
    }

    cartesDisponibles = [...toutesLesCartes];
    shuffle(cartesDisponibles);
    jeuPrepare = true;

    document.getElementById("tirerBtn").disabled = false;
    document.getElementById("ajouterBtn").disabled = false;

    alert("Le jeu a été mélangé et coupé !");
  }

  function tirerLesCartes() {
  if (!jeuPrepare) {
    alert("Veuillez d'abord mélanger le jeu.");
    return;
  }

  if (cartesTirees.length > 0) {
    alert("Tirage déjà effectué. Utilisez 'Ajouter une carte'.");
    return;
  }

  document.getElementById("resultats").innerHTML = ""; // reset visuel
  cartesTirees = [];

  // Appelle directement la fonction spécifique à cette page
  tirage7Cartes();
}

function tirage7Cartes() {
  const tirage = cartesDisponibles.splice(0, 7);
  const aspect = document.querySelector('input[name="aspect"]:checked').value;
  const affichage = document.getElementById("resultats");

  tirage.forEach(carte => {
    const sens = Math.random() < 0.5 ? "endroit" : "inversé";
    cartesTirees.push({ carte: carte, sens: sens });

    const texte = carte[sens][aspect]?.texte || "(Message manquant)";
    const div = document.createElement("div");

    div.innerHTML = `
      <h3>${carte.nom} (${sens})</h3>
      <img src="${carte.image}" alt="${carte.nom}" style="width:150px"><br>
      <p>${texte}</p>
    `;

    div.style.padding = "1rem";
    div.style.border = "1px solid #ccc";
    div.style.borderRadius = "8px";
    div.style.backgroundColor = "#fdfdfd";
    div.style.marginBottom = "1rem";

    affichage.appendChild(div);
  });

    document.getElementById("btnSynthese").style.display = "inline-block";
  }

  function ajouterUneCarte(estTirageInitial = false) {
  if (!jeuPrepare) {
    alert("Veuillez d'abord mélanger le jeu.");
    return;
  }

  const maxCartes = 10; // 7 de base + 3 couvertures
  if (cartesTirees.length >= maxCartes) {
    alert("Nombre maximum de cartes atteint (10).");
    return;
  }

  if (cartesDisponibles.length === 0) {
    alert("Le jeu est vide !");
    return;
  }

  const carte = cartesDisponibles.shift();
  const sens = Math.random() < 0.5 ? "endroit" : "inversé";
  const aspect = document.querySelector('input[name="aspect"]:checked').value;

  const interpretation = carte[sens][aspect]?.texte || "Interprétation manquante.";
  cartesTirees.push({ carte: carte, sens: sens });

  const div = document.createElement("div");
  div.innerHTML = `
    <h3>Carte supplémentaire : ${carte.nom} (${sens})</h3>
    <img src="${carte.image}" alt="${carte.nom}" style="width:150px"><br>
    <p>${interpretation}</p>
  `;

  div.style.padding = "1rem";
  div.style.border = "1px solid #ccc";
  div.style.borderRadius = "8px";
  div.style.backgroundColor = "#fdfdfd";
  div.style.marginBottom = "1rem";

  document.getElementById("resultats").appendChild(div);

  if (!estTirageInitial && cartesTirees.length === 10) {
    alert("Tirage complet : 7 cartes initiales + 3 couvertures.");
  }
}
  function réinitialiser() {
  location.reload(); // Recharge la page pour repartir de zéro
}
   
   function afficherSynthese7Cartes() {
  const aspect = document.querySelector('input[name="aspect"]:checked').value;

  const question = document.getElementById("question")?.value || "";
  const prenom = document.getElementById("prenom")?.value || "";
  const mode = prenom.toLowerCase() === "ce tirage" ? "lien" : "normal";

  if (cartesTirees.length < 7) {
    alert("Le tirage doit comporter 7 cartes pour générer cette synthèse.");
    return;
  }

  const phrases = cartesTirees.map(({ carte, sens }) => {
    const contenu = carte[sens]?.[aspect];
    let texte = "(Message absent)";

    if (typeof contenu === "object" && contenu.texte) {
      texte = contenu.texte.trim().split(".")[0] + ".";
    } else if (typeof contenu === "string") {
      texte = contenu.trim().split(".")[0] + ".";
    }

    return `${carte.nom} (${sens}) → ${texte}`;
  });

  let resume = "--- Synthèse du tirage ---\n\n";
  resume += "➤ Influences de départ :\n";
  resume += phrases.slice(0, 2).join("\n") + "\n\n";
  resume += "➤ Dynamique actuelle :\n";
  resume += phrases.slice(2, 5).join("\n") + "\n\n";
  resume += "➤ Évolution possible :\n";
  resume += phrases.slice(5, 7).join("\n") + "\n\n";

  const synthese = genererSyntheseGuidante(cartesTirees, aspect, { question, prenom, mode });
  resume += `→ Synthèse guidée :\n\n${synthese}`;

  document.getElementById("contenuSynthese").innerText = resume;
  document.getElementById("syntheseModal").style.display = "flex";
}
   function fermerSynthese() {
    document.getElementById("syntheseModal").style.display = "none";
  }

   function réinitialiser() {
    location.reload();
  }

window.onload = function () {
  document.getElementById("tirerBtn").disabled = true;
  document.getElementById("ajouterBtn").disabled = true;
  document.getElementById("btnSynthese").onclick = afficherSynthese7Cartes;
};
</script>
  <div id="syntheseModal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.5); z-index: 9999; justify-content: center; align-items: center;">
  <div style="background: white; padding: 2rem; max-width: 600px; max-height: 80vh; overflow-y: auto; border-radius: 12px; position: relative;">
    <button onclick="fermerSynthese()" style="position: absolute; top: 10px; right: 10px;">✖</button>
    <h2>Synthèse Guidante</h2>
    <div id="contenuSynthese" style="white-space: pre-wrap; margin-bottom: 1.5rem;"></div>
    <div style="text-align: center;">
      <button onclick="fermerSynthese()" style="background-color: #4a90e2; color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 6px; font-size: 1rem; cursor: pointer;">
        Fermer
      </button>
    </div>
  </div>
</div>
  <script src="data/synthese.js"></script>
</body>
</html>
</body>
</html>
