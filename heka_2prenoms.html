<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Tirage entre deux prénoms – Oracle Heka</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Tirage gratuit entre deux prénoms avec l’Oracle Heka : une méthode symbolique et introspective pour explorer les dynamiques relationnelles.">
<style>
  body { margin: 0; font-family: 'Georgia', serif; background: #f8f5f2; color: #333; }
  header { background: #f5efe6; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  header nav a { text-decoration: none; color: #444; font-weight: bold; margin: 0 0.5rem; }
  header nav a:hover { text-decoration: underline; }
  #burgerBtn { display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #333; }
  #burgerBtn:hover { color: #000; }
  @media (max-width: 768px) { #burgerBtn { display: block; } header nav { display: none; flex-direction: column; position: absolute; top: 60px; left: 0; width: 100%; background: #f5efe6; box-shadow: 0 2px 5px rgba(0,0,0,0.1); } header nav.show { display: flex; } }
  main { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
  button { margin: 0.5rem 0.3rem; padding: 0.6rem 1rem; background: #3b6a9a; color: #fff; border: none; border-radius: 6px; cursor: pointer; }
  button:hover { background: #345b85; }
  #resultats { margin-top: 2rem; }
  #resultats > div { border: 1px solid #b8a998; border-radius: 8px; background: #fdfdfd; padding: 1rem; margin: 0.5rem; text-align: center; }
  footer { background: #e8e0d8; text-align: center; padding: 1rem; font-size: 0.9rem; color: #666; border-top: 1px solid #b8a998; margin-top: 2rem; }
</style>
</head>
<body>

<header>
  <button id="burgerBtn" aria-label="Menu">☰</button>
  <nav>
    <a href="index.html">Accueil</a>
    <a href="apropos.html">À propos</a>
    <a href="methodes.html">Méthodes</a>
    <a href="heka.html">Heka</a>
    <a href="sia.html">Sia</a>
    <a href="seshat.html">Seshat</a>
    <a href="decouverte.html">Découverte</a>
  </nav>
</header>

<main>
<h1>Tirage entre deux prénoms</h1>

<fieldset style="border: none;">
  <legend><strong>Choisir l’aspect :</strong></legend>
  <label><input type="radio" name="aspect" value="personnalité" checked> Personnalité</label>
  <label><input type="radio" name="aspect" value="matériel"> Matériel</label>
  <label><input type="radio" name="aspect" value="professionnel"> Professionnel</label>
  <label><input type="radio" name="aspect" value="affectif"> Affectif</label>
  <label><input type="radio" name="aspect" value="spirituel"> Spirituel</label>
</fieldset>

<button onclick="melangerEtCouper()">Mélanger et couper le jeu</button>
<button id="tirerBtn" onclick="tirageCroise()" disabled>Tirer</button>
<button id="ajouterBtn" onclick="ajouterUneCarte()" disabled>Ajouter une carte</button>
<button onclick="réinitialiser()">Réinitialiser</button>

<div style="margin-top: 1rem;">
  <label for="question"><strong>Posez votre question (facultatif) :</strong></label><br>
  <input type="text" id="question" style="width:100%; max-width:600px; margin:0.5rem 0;">
  <label for="prenom1"><strong>Prénom 1 :</strong></label><br>
  <input type="text" id="prenom1" style="width:100%; max-width:600px; margin:0.5rem 0;">
  <label for="prenom2"><strong>Prénom 2 :</strong></label><br>
  <input type="text" id="prenom2" style="width:100%; max-width:600px; margin:0.5rem 0;">
</div>

<div id="resultats" style="display:flex; flex-direction:column;">
  <div id="ligne1" style="display:flex; flex-wrap:wrap;"></div>
  <div id="ligne2" style="display:flex; flex-wrap:wrap; margin-top:1rem;"></div>
</div>

<button id="btnSynthese" style="display:none; margin-top:1rem;">Voir la synthèse</button>

<p>Chaque lettre de chaque prénom reçoit une carte. Ce tirage met en lumière les énergies et blocages relationnels :</p>
<ul>
  <li>Passé / Présent / Futur</li>
  <li>Situation / Obstacle / Conseil</li>
  <li>Conflit / Intention / Évolution</li>
</ul>
<p>Il offre un éclairage introspectif, symbolique et non divinatoire pour comprendre la dynamique entre deux prénoms.</p>
</main>

<footer>Produit par <strong>OracleHeka</strong> — <a href="mentions-legales.html">Mentions légales</a> — <a href="faq.html">FAQ</a></footer>

<div id="syntheseModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999; justify-content:center; align-items:center;">
  <div style="background:white; padding:2rem; max-width:600px; border-radius:12px; position:relative;">
    <button onclick="fermerSynthese()" style="position:absolute; top:10px; right:10px;">✖</button>
    <h2>Synthèse guidante</h2>
    <div id="contenuSynthese" style="white-space: pre-wrap;"></div>
    <div style="text-align:center; margin-top:1rem;">
      <button onclick="fermerSynthese()">Fermer</button>
    </div>
  </div>
</div>

<script src="data/synthese.js"></script>
<script>
let toutesLesCartes=[], cartesDisponibles=[], cartesTirees=[], jeuPrepare=false;

async function chargerCartes() {
  const r=await fetch("https://oracleheka.github.io/oracle_trium/data/heka.json");
  toutesLesCartes=await r.json();
  cartesDisponibles=[...toutesLesCartes];
}
function shuffle(a) { for (let i=a.length-1;i>0;i--) { const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } }
async function melangerEtCouper() {
  if(toutesLesCartes.length===0) await chargerCartes();
  cartesDisponibles=[...toutesLesCartes]; shuffle(cartesDisponibles);
  jeuPrepare=true;
  document.getElementById("tirerBtn").disabled=false;
  document.getElementById("ajouterBtn").disabled=false;
  alert("Le jeu a été mélangé et coupé !");
}
function tirageCroise() {
  const nom1=document.getElementById("prenom1").value.trim().toUpperCase();
  const nom2=document.getElementById("prenom2").value.trim().toUpperCase();
  const aspect=document.querySelector('input[name="aspect"]:checked').value;
  const ligne1=document.getElementById("ligne1"); const ligne2=document.getElementById("ligne2");
  ligne1.innerHTML=""; ligne2.innerHTML=""; cartesTirees=[];
  if(!nom1||!nom2){alert("Veuillez entrer les deux prénoms.");return;}
  const nb=Math.max(nom1.length,nom2.length);
  if(cartesDisponibles.length<nb*2){alert("Pas assez de cartes.");return;}
  for(let i=0;i<nb;i++){
    if(i<nom1.length){const c=carteTiree(nom1[i],nom1,aspect); ligne1.appendChild(c.div); cartesTirees.push(c.data);}
    if(i<nom2.length){const c=carteTiree(nom2[i],nom2,aspect); ligne2.appendChild(c.div); cartesTirees.push(c.data);}
  }
  document.getElementById("btnSynthese").style.display="inline-block";
}
function carteTiree(lettre,prenom,aspect){
  const carte=cartesDisponibles.shift(); const sens=Math.random()<0.5?"endroit":"inversé";
  const texte=carte[sens][aspect]?.texte||"(Message manquant)";
  const div=document.createElement("div"); div.innerHTML=`<strong>${prenom} - ${lettre}</strong><br><strong>${carte.id} : (${carte.nom}) : (${sens})</strong><br><img src="${carte.image}" style="width:100px;"><p>${texte}</p>`;
  div.style.border="1px solid #b8a998"; div.style.borderRadius="8px"; div.style.background="#fdfdfd"; div.style.padding="1rem"; div.style.margin="0.5rem";
  return {div:div, data:[carte.nom,sens]};
}
function ajouterUneCarte(){
  if(!jeuPrepare){alert("Mélangez d’abord !");return;}
  const aspect=document.querySelector('input[name="aspect"]:checked').value;
  const carte=cartesDisponibles.shift(); const sens=Math.random()<0.5?"endroit":"inversé";
  const texte=carte[sens][aspect]?.texte||"(Message manquant)";
  const div=document.createElement("div"); div.innerHTML=`<strong>Supplémentaire</strong><br><strong>${carte.id} : (${carte.nom}) : (${sens})</strong><br><img src="${carte.image}" style="width:100px;"><p>${texte}</p>`;
  document.getElementById("ligne2").appendChild(div); cartesTirees.push([carte.nom,sens]);
}
function afficherSynthese2Prenoms(){
  const aspect=document.querySelector('input[name="aspect"]:checked').value;
  const nom1=document.getElementById("prenom1").value.trim(); const nom2=document.getElementById("prenom2").value.trim();
  const question=document.getElementById("question").value||"";
  const synthese=genererSyntheseGuidante(cartesTirees,aspect,{question,prenom:`${nom1} et ${nom2}`,mode:"lien"});
  document.getElementById("contenuSynthese").innerText=synthese; document.getElementById("syntheseModal").style.display="flex";
}
function fermerSynthese(){ document.getElementById("syntheseModal").style.display="none"; }
function réinitialiser(){ location.reload(); }
window.onload=()=>{document.getElementById("tirerBtn").disabled=true; document.getElementById("ajouterBtn").disabled=true; document.getElementById("btnSynthese").onclick=afficherSynthese2Prenoms;
const burgerBtn=document.getElementById("burgerBtn"); const nav=document.querySelector("header nav");
burgerBtn.addEventListener("click",()=>nav.classList.toggle("show"));};
</script>
</body>
</html>
